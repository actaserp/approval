<!DOCTYPE html>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <link rel="icon" type="image/png" href="/img/favicon.png">
    <title> [KT FOMS] AI 기반 연료전지 인프라 구축></title>
    <link rel="stylesheet" href="/resource/windowContainer/css/jquery.scrollbar.min.css">
    <link rel="stylesheet" href="/resource/windowContainer/css/bootstrap.min.css">
    <link rel="stylesheet" href="/resource/windowContainer/css/nth-icons.css">
    <link rel="stylesheet" href="/resource/windowContainer/css/nth-tabs.css">
    <link rel="stylesheet" href="/resource/ax5ui/ax5ui.all.css">
    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/theme-top-mes.css">
    <link rel="stylesheet" href="/css/theme-left-mes.css">
    <link rel="stylesheet" type="text/css" href="/css/import.css">
    <script src="/js/vendor/jquery-3.6.0.js"></script>
    <script src="/js/vendor/jquery-ui.min.js"></script>
    <script src="/js/ui.js"></script> <!-- Common js -->
</head>

<body>
<div class="page-wrapper sub-page">
    <div class="dashboard-layout-header">
        <header>
            <div class="left">
                <div class="logo">
                    <h1><img src="/images/logo/logo.svg" alt="로고"></h1>
                </div>
            </div>
            <div class="right">
                <div class="info">
                    <dl style="width:120px;">
                        <dt>REC 정보</dt>
                        <dd>
                            <span style="margin-right: 5px;">평균</span>
                            <p>74,949</p>
                        </dd>
                    </dl>
                    <dl style="width:120px;">
                        <dt>SMP 정보</dt>
                        <dd>
                            135.69
                        </dd>
                    </dl>
                </div>
                <div class="weather">
                    <div class="wt-main">
                        <p class="area">연료전지 발전소 대구</p>
                        <div class="wt-graphic">
                            <img src="/images/icon/weather/ico-wt1.svg" alt="맑음">
                            <p>
                                26<span class="celsius">℃</span>
                            </p>
                        </div>
                    </div>
                    <div class="wt-detail">
                        <ul>
                            <li>
                                <img src="/images/icon/ico-umbrella.svg" alt="강수">
                                20%
                            </li>
                            <li>
                                <img src="/images/icon/ico-water.svg" alt="습도">
                                25%
                            </li>
                            <li>
                                <img src="/images/icon/ico-wind.svg" alt="풍속">
                                16m/s
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- 알람 -->
                <a href="#" class="alarm" title="알람">
                    <img src="/images/icon/ico-bell.svg" alt="알람 아이콘">
                    <span>
                            알람
                        </span>
                    <span class="num">8</span>
                </a>
                <div class="alarm-box">
                    <ul class="alarm-tab-links">
                        <li class="active">
                            <a href="#alarm-tab1" title="발전소">발전소(2)</a>
                        </li>
                        <li>
                            <a href="#alarm-tab2" title="티켓알람">티켓알람(3)</a>
                        </li>
                        <li>
                            <a href="#alarm-tab3" title="로봇알람">로봇알람(3)</a>
                        </li>
                    </ul>
                    <!-- tab1 -->
                    <div class="alarm-tab-contents">
                        <div class="alarm-tab-item" id="alarm-tab1">
                            <div class="table-wrap">
                                <table>
                                    <caption>발전소 알람 테이블</caption>
                                    <colgroup>
                                        <col class="wp15">
                                        <col class="wp25">
                                        <col class="wp25">
                                        <col class="wp25">
                                    </colgroup>
                                    <tbody>
                                    <tr>
                                        <td>
                                            <span class="dot-mint"></span>
                                        </td>
                                        <td>2024.07.09</td>
                                        <td>F/C #1</td>
                                        <td>스텍고온</td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span class="dot-blue"></span>
                                        </td>
                                        <td>2024.07.09</td>
                                        <td>F/C #1</td>
                                        <td>스텍고온</td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span class="dot-purple"></span>
                                        </td>
                                        <td>2024.07.09</td>
                                        <td>F/C #1</td>
                                        <td>스텍고온</td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span class="dot-purple"></span>
                                        </td>
                                        <td>2024.07.09</td>
                                        <td>F/C #1</td>
                                        <td>스텍고온</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="alarm-tab-item" id="alarm-tab2">
                            <div class="table-wrap">
                                <table>
                                    <caption>티켓 알람 테이블</caption>
                                    <colgroup>
                                        <col class="wp15">
                                        <col class="wp25">
                                        <col class="wp25">
                                        <col class="wp25">
                                    </colgroup>
                                    <tbody>
                                    <tr>
                                        <td>
                                            <span class="dot-mint"></span>
                                        </td>
                                        <td>2024.07.09</td>
                                        <td>F/C #1</td>
                                        <td>스텍고온</td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span class="dot-mint"></span>
                                        </td>
                                        <td>2024.07.09</td>
                                        <td>F/C #1</td>
                                        <td>스텍고온</td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span class="dot-mint"></span>
                                        </td>
                                        <td>2024.07.09</td>
                                        <td>F/C #1</td>
                                        <td>스텍고온</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="alarm-tab-item" id="alarm-tab3">
                            <div class="table-wrap">
                                <table>
                                    <caption>로봇 알람 테이블</caption>
                                    <colgroup>
                                        <col class="wp15">
                                        <col class="wp25">
                                        <col class="wp25">
                                        <col class="wp25">
                                    </colgroup>
                                    <tbody>
                                    <tr>
                                        <td>
                                            <span class="dot-mint"></span>
                                        </td>
                                        <td>2024.07.09</td>
                                        <td>F/C #1</td>
                                        <td>스텍고온</td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span class="dot-mint"></span>
                                        </td>
                                        <td>2024.07.09</td>
                                        <td>F/C #1</td>
                                        <td>스텍고온</td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span class="dot-mint"></span>
                                        </td>
                                        <td>2024.07.09</td>
                                        <td>F/C #1</td>
                                        <td>스텍고온</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <a href="#" title="확인" class="btn-gray">확인</a>
                </div>
                <!-- 알람 -->
                <!-- 사용자 로그인 상태-->
                <a class="user" title="사용자">
                    <img src="/images/icon/ico-user.svg" alt="사용자 아이콘">
                    <strong><span class="user-name" id="userName2" th:text="${ username }"></span></strong>
                    <span>관리자</span>
                </a>
                <div class="user-box">
                    <ul>
                        <li id="myinfo">
                            <a href="#" title="내 정보">내 정보</a>
                        </li>
                        <li id="logout">
                            <a href="#" title="로그아웃">로그아웃</a>
                        </li>
                    </ul>
                </div>
            </div>
        </header>
        <!--header [E]-->
    </div>
    <div class="menu_area">
        <div class="dashboard-layout-contents">

            <!-- [대시보드] 왼쪽 컨텐츠 영역 -->
            <div class="dashboard-layout-left menu_wrap">
                <!-- (레이아웃) 사이드바  -->
                <div class="dashboard-layout-sidebar tabs" data-tab="tabWrap">
                    <ul class="layout-sidebar-tab">
                        <li class="active">
                            <a href="#menu" title="전체메뉴">전체메뉴</a>
                        </li>
                        <li>
                            <a href="#bookmark" title="내메뉴">내메뉴</a>
                        </li>
                    </ul>
                    <div class="layout-sidebar-tabcont">
                        <nav class="layout-nav sidebar-tabcont" id="menu">
                            <ul class="dep1">
                                <li class="dep1-1">
                                    <a href="#a" title="모니터링" class="ico-lnb01">
                                        모니터링
                                    </a>
                                    <ul class="dep2" id="dep2-monitoring">

                                    </ul>
                                </li>
                                <li class="dep1-1">
                                    <a href="#a" title="서비스 분석" class="ico-lnb02">
                                        서비스 분석
                                    </a>
                                    <ul class="dep2" id="dep2-service-analysis">

                                    </ul>
                                </li>
                                <li class="dep1-1">
                                    <a href="#a" title="운영관리" class="ico-lnb03">
                                        운영 관리
                                    </a>
                                    <ul class="dep2" id="dep2-operation-management">

                                    </ul>
                                </li>
                                <li class="dep1-1">
                                    <a href="#a" title="점검관리" class="ico-lnb04">
                                        점검 관리
                                    </a>
                                    <ul class="dep2" id="dep2-inspection-management">

                                    </ul>
                                </li>
                                <li class="dep1-1">
                                    <a href="#a" title="시스템설정" class="ico-lnb05">
                                        시스템 설정
                                    </a>
                                    <ul class="dep2" id="dep2-system-settings">

                                    </ul>
                                </li>
                            </ul>
                        </nav> <!-- // nav end -->
                        <div class="layout-bookmark sidebar-tabcont" id="bookmark">
                            <ul class="bookmark-list" id="bookmark-menu">

                            </ul>
                        </div> <!-- // bookmark end -->
                    </div>
                    <div class="layout-sidebar-bottom">
                        <img src="/images/logo/logo-kt.svg" alt="kt logo">
                    </div>
                </div>
            </div><!-- //dashboard-layout-left end-->

            <!-- [대시보드] 오른쪽 컨텐츠 영역 -->
            <!-- //dashboard-layout-right end-->

        </div>
    </div>
    <div class="con_area">
        <div class="contents">
            <div class="nth-tabs" id="main-tabs"></div>
        </div>
    </div>
</div>
<div class="footer">
    <!--footer [S]-->
    <span class="footer-left" id="link_privatepolicy" data-commonCd="개인정보 처리방침">개인정보 처리방침</span>
    <span class="footer-left" id="link_emailreject" data-commonCd="이메일 무단수집 거부">이메일 무단수집 거부1</span>
    <span class="footer-right">Copyright ⓒ (주)레플러스. All Rights Reserved.</span>
    <!--footer [E]-->
</div>


<script type="text/javascript" src="/resource/jquery.min.js"></script>
<script type="text/javascript" src="/resource/jquery-validation/1.17.0/jquery.validate.min.js"></script>

<script type="text/javascript">
    $('html').attr('lang', sessionStorage.getItem('lang_code'));
</script>
<script type="text/javascript" src="/resource/windowContainer/js/jquery.scrollbar.min.js"></script>
<script type="text/javascript" src="/resource/windowContainer/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/resource/ax5ui/ax5ui.all.min.js?v=1000"></script>

<!-- 메뉴탭 이동 script -->
<script type="text/javascript" src="/resource/windowContainer/js/html5sortable.js"></script>
<script type="text/javascript" src="/js/nth-tabs.js"></script>

<th:block th:replace="system_js :: system_js"></th:block>

<script src="/js/common.js?v=1060"></script>
<script type="text/javascript" src="/js/yumenu.js?v=1071"></script>
<script type="text/javascript" src="/js/yuscript.js?v=1060"></script>
<script type="text/javascript" src="/js/ax5commUtil.js?v=1070"></script>
<script type="text/javascript">
    let nthTabs = null;

    $(document).ready(function () {

        // 메뉴 매핑
        const dep2Mappings = {
            1: '#dep2-monitoring',
            2: '#dep2-service-analysis',
            3: '#dep2-operation-management',
            4: '#dep2-inspection-management',
            5: '#dep2-system-settings'
        };

        function loadMenuFolders(FrontFolderId, $FrontFolderElement) {
            $.ajax({
                url: '/api/system/menu_setup/read',
                type: 'GET',
                success: function (response) {
                    const folders = response.data.filter(folder => folder.FrontFolder_id === parseInt(FrontFolderId));
                    folders.forEach(function (folder) {
                        let $li = $('<li></li>');
                        let $a = $('<a href="#"></a>').text(folder.FolderName).attr('data-folder-id', folder.id);
                        $li.append($a);

                        let $subUl = $('<ul class="dep3 documents"></ul>');
                        $li.append($subUl);

                        loadMenuItems(folder.id, $subUl);
                        $FrontFolderElement.append($li);
                    });

                    // 하위 메뉴가 완전히 로드된 후에 이벤트 리스너 등록
                    $FrontFolderElement.find('.dep3').on('click', 'a', function (e) {
                        e.preventDefault();
                        var $li = $(this).parent('li');
                        if (!$li.hasClass('on')) {
                            $li.siblings('li').removeClass('on');
                            $li.addClass('on');
                        }

                        var val = $(this).text();
                        var menuurl = $(this).attr('menuurl');
                        var objid = $(this).attr('data-objid');
                        var _bookmark = $(this).attr('data-bookmark');
                        var _manual = $(this).attr('data-manual');

                        if (menuurl != '#') {
                            if (nthTabs.isExistsTab('#' + objid)) {
                                nthTabs.toggleTab('#' + objid);
                            } else {
                                nthTabs.addTab({
                                    id: objid,
                                    title: val,
                                    url: menuurl,
                                    active: true,
                                    allowClose: true,
                                    ismanual: _manual
                                });
                            }
                        }
                    });
                }
            });
        }

        function loadMenuItems(folderId, $parentElement) {
            $.ajax({
                url: '/api/system/menu_setup/submenu_list',
                type: 'GET',
                data: { folder_id: folderId },
                success: function (response) {
                    const items = response.data;
                    items.forEach(function (item) {
                        let $li = $('<li></li>');

                        let $a = $('<a href="#" menuurl="' + item.Url + '" data-manual="false" data-bookmark="false" data-objid="' + item.MenuCode + '" title="' + item.MenuName + '"></a>').text(item.MenuName);
                        $li.append($a);
                        $parentElement.append($li);
                    });
                }
            });
        }

        // 폴더
        Object.keys(dep2Mappings).forEach(FrontFolderId => {
            loadMenuFolders(FrontFolderId, $(dep2Mappings[FrontFolderId]));
        });

        // 메뉴 매핑 종료

        let default_menu = 'wm_dashboard_ems';
        nthTabs = $('#main-tabs').nthTabs();

        // 메뉴 조회 및 추가
        function addMenu(_nodeData) {

            for (var i = 0; i < _nodeData.length; i++) {
                let node = _nodeData[i];

                var strtxt = '';
                for (var j = 0; j < node.nodes.length; j++) {
                    let subnode = node.nodes[j];
                    var sublitag = '<li>';
                    sublitag += '<a href="#" data-manual="' + subnode.ismanual
                        + '" data-bookmark="' + subnode.isbookmark
                        + '" data-objid="' + subnode.objId
                        + '" menuurl="' + ((subnode.objUrl === '') ? '#' : subnode.objUrl) + '">'
                        + subnode.objNm + '</a>';

                    sublitag += '<ul class="dep3"></ul>'; // 하위 메뉴를 위한 ul 추가
                    sublitag += '</li>';
                    strtxt += sublitag;
                }

            }

            $('.dep3').on('click', 'a', function (e) {
                e.preventDefault();
                var $li = $(this).parent('li');
                if (!$li.hasClass('on')) {
                    $li.siblings('li').removeClass('on');
                    $li.addClass('on');
                }

                var val = $(this).text();
                var menuurl = $(this).attr('menuurl');
                var objid = $(this).attr('data-objid');
                var _bookmark = $(this).attr('data-bookmark');
                var _manual = $(this).attr('data-manual');

                if (menuurl != '#') {
                    if (nthTabs.isExistsTab('#' + objid)) {
                        nthTabs.toggleTab('#' + objid);
                    } else {
                        nthTabs.addTab({ id: objid, title: val, url: menuurl, active: true, allowClose: true, ismanual: _manual });
                    }
                }
            });
        }


        // 메뉴 데이터를 API에서 가져와서 처리
        $.getJSON('/api/system/menus', function (datas) {
            addMenu(datas.data);
        }).fail(function (e) {
            console.error('메뉴 생성에 실패하였습니다.', e);
        });

        // 즐겨찾기 조회 및 추가
        addMenuBookmark();

        if (default_menu != '') {
            nthTabs.addTab({
                id: default_menu,
                title: 'EMS 모니터링',
                url: '/gui/' + default_menu + '/default',
                active: true,
                allowClose: false
            });
            // if (!$('[href*=#' + default_menu + ']').find('i').hasClass('fa-star')) {
            //     $('[href*=#' + default_menu + ']').prepend('<i class="fas fa-star' + ('false' == 'true' ? ' bookmark' : '') + '"></i>');
            // }
            // $('.nav-tabs .fa-star').off('click').on('click', function (e) {
            //     $(this).toggleClass('bookmark');
            //     fnBookMarkSave(default_menu, $(this).hasClass('bookmark'));
            // });
            // setTimeout(function () {
            //     var $targetMenu = $('#left-menu').find('a[data-objid=' + default_menu + ']').closest('li.has-sub');
            //     $targetMenu.addClass('open');
            //     $targetMenu.children('ul').show();
            // }, 100);
        } else {
            nthTabs.addTab({
                id: default_menu,
                title: 'dddd',
                url: '/gui/' + default_menu + '/default',
                active: true,
                allowClose: false
            });
            // if (!$('[href*=' + default_menu + ']').find('i').hasClass('fa-star')) {
            //     $('[href*=' + default_menu + ']').prepend('<i class="fas fa-star' + ('false' == 'true' ? ' bookmark' : '') + '"></i>');
            //     $('.nav-tabs .fa-star').off('click').on('click', function (e) {
            //         $(this).toggleClass('bookmark');
            //         fnBookMarkSave(default_menu, $(this).hasClass('bookmark'));
            //     });
            // }
            // setTimeout(function () {
            //     let $targetMenu = $('#left-menu').find('a[data-objid=' + default_menu + ']').closest('li.has-sub');
            //     $targetMenu.addClass('open');
            //     $targetMenu.children('ul').show();
            // }, 100);
        }
        $('.scrollbar-inner').scrollbar();
        // var parentClass = $(this).parent('li');
        // if (!$(this).hasClass('on')) {
        //     $('.documents a').removeClass('on');
        //     $(this).addClass('on');
        // }
        // if (parentClass.attr('class') == 'documents') {
        //     $('.gnb li').removeClass('open');
        //     $('.gnb li > ul').slideUp(100);
        // }
        // if (localStorage.getItem('theme-top') === null && localStorage.getItem('theme-left') === null) {
        //     dynamicLinkCss('/css/theme-top-mes', '/css/theme-left-mes');
        // } else {
        //     dynamicLinkCss(localStorage.getItem('theme-top'), localStorage.getItem('theme-left'));
        // }

        // //let _mainUrl = 'wm_dashboard_summary';
        // let _mainUrl = default_menu;
        // // 모바일 구분
        // if ('B' == 'F') {
        //     _mainUrl = '#OBJ0000000199';
        //     $('#navbarBarMenu1').show();
        //     $('#navbarBarMenu2').hide();
        //     $('.menu_wrap').addClass('mobile_menu_wrap');
        //     $('.menu_area').addClass('mobile_menu_area');
        //     $('.con_area').addClass('mobile_con_area');
        // } else {
        //     $('#navbarBarMenu1').hide();
        //     $('#navbarBarMenu2').show();
        // }
        //
        // // 메뉴 자동으로 닫히게
        // if ($(window).innerWidth() < 800) {
        //     $('body').addClass('open');
        //     $('.tabWrap').addClass('menu_close');
        //     $('.con_area').addClass('open');
        // }

        // var jsmedia = window.matchMedia("screen and (max-width:799px)");
        // jsmedia.addListener(function (e) {
        //     if (e.matches) {
        //         $('body').addClass('open');
        //         $('.wrap').addClass('menu_close');
        //         $('.con_area').addClass('open');
        //         $('.menu_wrap').addClass('mobile_menu_wrap');
        //         $('.menu_area').addClass('mobile_menu_area');
        //         $('.con_area').addClass('mobile_con_area');
        //     } else {
        //         $('body').removeClass('open');
        //         $('.wrap').removeClass('menu_close');
        //         $('.con_area').removeClass('open');
        //         $('.menu_wrap').removeClass('mobile_menu_wrap');
        //         $('.menu_area').removeClass('mobile_menu_area');
        //         $('.con_area').removeClass('mobile_con_area');
        //     }
        // });

        // //$('#mainlogotitle').text("");
        // $('#mainlogotitle').on('click', function () {
        //     nthTabs.toggleTab(_mainUrl);
        // });

        // //menu slide(left open)
        // $('.open_menu').click(function () {
        //     $(this).toggleClass('menu_close');
        //     $('.wrap').toggleClass('menu_close');
        // });
        // //menu slide(left open)
        // $('.open_menu').click(function () {
        //     $('.con_area').toggleClass('open');
        //     $('.left_area').toggleClass('open');
        //     $('body').toggleClass('open');
        // });

        // TAB메뉴 Context Menu
        $('#tabdragdrop').on('contextmenu', 'li', function (e) {
            if ($(this).attr('not-allow-close') === undefined) {
                $('.otherAuthmaintab').show();
                if ($(this).hasClass('active')) {
                    $('.otherAuthtab').show();
                } else {
                    $('.otherAuthtab').hide();
                }
            } else {
                $('.otherAuthmaintab').hide();
            }
            var leftxpo = 260;
            if ($('.menu_close .menu_area').css('left') !== undefined) {
                leftxpo = 15;
            }
            var left = e.pageX - leftxpo;
            $('#contextTabMenu').toggle().css({
                left: left + 'px'
            }).attr('targetObjId', $(this).children('a').attr('href'));
            return false;
        });

        $(".profile_box").click(function () {
            $(".profile_mbox").toggle();
        })

        $(".btn_nbox_close").click(function () {
            $(".notification_mbox").hide();
        });

        $(".btn_pbox_close").click(function () {
            $(".profile_mbox").hide();
        });


        $('#logout').on('click', function (e) {
            e.preventDefault();
            Alert.confirm('', '로그아웃하시겠습니까?', function () {
                i18n.resetData();
                location.href = '/logout';
            });
        });

        // CR = String.fromCharCode(10);
        // let notify_list = notify_text.split(CR);
        //
        // let notify_index = 0;
        //
        // let timer = setInterval(function () {
        //     return;
        //
        //     if (notify_index >= notify_list.length)
        //         notify_index = 0;
        //     let notify_text = notify_list[notify_index];
        //     $('#notify_text').text(notify_text);
        //     notify_index++;
        // }, 5000);

        // 내정보 클릭
        $('#myinfo').on('click', function (e) {
            e.preventDefault();
            Ax5Modal.open({url: '/page/account/myinfo', width: 400, height: 300});
            $(".profile_contbox").hide();
        });

        // 언어설정
        // $('#myLanguage').on('click', function (e) {
        //     e.preventDefault();
        //     Ax5Modal.open({url: '/page/account/language', width: 400, height: 200});
        //     $(".profile_contbox").hide();
        // });

        // 테마변경
        // $('.setting-color > label').on('click', function (e) {
        //     dynamicLinkCss($(this).data('load-top-css'), $(this).data('load-left-css'));
        // });

        // 개인정보 처리방침 클릭
        // $('#link_privatepolicy').on('click', function (e) {
        //     Ax5Modal.open({url: '/page/popup/privacy_policy', width: 800, height: 200});
        // });

        // 이메일 무단수집 거부 클릭
        // $('#link_emailreject').on('click', function (e) {
        //     Ax5Modal.open({url: '/page/popup/email_unauthorized_collection_policy', width: 800, height: 400});
        // });

        // 오픈소스 사용공지 필요

        // Rec 정보
        fetchRecData();

        function fetchRecData() {
            fetch('/rec/recAverage')
                .then(response => response.text()) // 응답을 텍스트로 변환
                .then(data => {
                    $('#recValue').text(data);
                })
                .catch(error => console.error('Error fetching REC data:', error)); // 오류 처리
        }

        // SMP 정보
        fetchSmpData();

        /*function fetchSmpData() {
            fetch('/smp/smpCurrent') // SMP 데이터를 가져오는 GET 요청
                .then(response => response.text()) // 응답을 텍스트(XML)로 변환
                .then(data => {
                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(data, "application/xml");
                    const smpValues = xmlDoc.getElementsByTagName("smp");
                    if (smpValues.length > 0) {
                        document.getElementById('smpValue').textContent = smpValues[0].textContent;
                    } else {
                        document.getElementById('smpValue').textContent = '데이터 없음';
                    }
                })
                .catch(error => {
                    console.error('Error fetching SMP data:', error);
                    document.getElementById('smpValue').textContent = '데이터 로드 실패';
                }); // 오류 처리
        }*/

        function fetchSmpData() {
            fetch('/smp/smpCurrent') // SMP 데이터를 가져오는 GET 요청
                .then(response => response.text()) // 응답을 텍스트(XML)로 변환
                .then(data => {
                    console.log("서버 응답 로그 출력" + data); // 서버 응답 로그 출력
                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(data, "application/xml");
                    console.log(" 파싱된 XML 로그 출력" + xmlDoc); // 파싱된 XML 로그 출력
                    const smpValues = xmlDoc.getElementsByTagName("smp");
                    console.log("추출된 smp 태그들의 로그 출력" + smpValues); // 추출된 smp 태그들의 로그 출력
                    if (smpValues.length > 0) {
                        document.getElementById('smpValue').textContent = smpValues[0].textContent;
                    } else {
                        document.getElementById('smpValue').textContent = '데이터 없음';
                    }
                })
                .catch(error => {
                    console.error('Error fetching SMP data:', error);
                    document.getElementById('smpValue').textContent = '데이터 로드 실패';
                }); // 오류 처리
        }
    });

</script>

<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
</body>
</html>
