<html layout:decorate="~{layout_page}" xmlns:layout="http://www.w3.org/1999/xhtml">
<style>

</style>

<th:block layout:fragment="content">


    <!--- (레이아웃) Contents 영역 -->
    <div class="layout-contents">
        <!-- Page Title -->
        <div class="page-title-wrap">
            <div class="left">
                <h2>장비이력조회</h2><a id="toggleButton" onclick="toggleSearchWrap()"><img src="/images/icon/ico-down.png" alt="알람 아이콘"></a>
                <!--<a title="북마크" class="bookmark toggle">
                    내 메뉴
                </a>-->
            </div>
            <ul class="page-navi">
                <li><img src="/images/icon/ico-nav-home.svg" alt="홈아이콘"></li>
            </ul>
        </div>
        <!-- Select -->
        <div class="search-wrap" id="searchWrap" style="display: none">
            <ul>
                <li>
                    <select title="지역" id="spworkcd" name="spworkcd"
                            onchange="updateCompcdOptions(); saveSelectedSandanData(); ">
                        <!-- 지역 옵션을 JavaScript에서 동적으로 채움 -->
                    </select>
                    <input type="hidden" id="spworknm" name="spworknm">
                </li>
                <li>
                    <select title="산단" id="spcompcd" name="spcompcd"
                            onchange="updatePlancdOptions(); saveSelectedSandanData();">
                        <!-- 산단 옵션을 JavaScript에서 동적으로 채움 -->
                    </select>
                    <input type="hidden" id="spcompnm" name="spcompnm">
                </li>
                <li>
                    <select title="시설" id="spplancd" name="spplancd" onchange="updatePlannm(); saveSelectedSandanData()">
                        <!-- 시설 옵션을 JavaScript에서 동적으로 채움 -->
                    </select>
                    <input type="hidden" id="spplannm" name="spplannm">
                </li>
            </ul>
            <div class="card-btn-wrap">
                <a title="탭설정" class="btn btn-popup-open" data-popup="popup1">
                    <img src="/images/icon/btn-setting.svg" alt="설정아이콘">
                </a>
            </div>
        </div>
        <section style="border-radius: 0px; border: none; box-shadow: none; padding: 2px">
            <div class="section-top">
                <div class="search-wrap">

                    <dl>
                        <dt>
                            <label for="periodType">
                                기간유형<span class="eq">*</span>
                            </label>
                        </dt>
                        <dd>
                            <ul class="date-box">
                                <li>
                                    <select id="periodType" name="periodType" onchange="updatePeriodInputs()">
                                        <option value="hourly">시간별</option>
                                        <option value="monthly" selected>월별</option>
                                        <option value="quarterly">분기별</option>
                                        <option value="halfyearly">반기별</option>
                                        <option value="yearly">연도별</option>
                                    </select>
                                </li>
                            </ul>
                        </dd>
                    </dl>
                    <dl id="searchYear">
                        <dt>
                            조회연도<span class="eq">*</span>
                        </dt>
                        <dd>
                            <ul class="date-box">
                                <li>
                                    <select id="yearSelectTab" name="yearSelectTab">
                                        <option>2023</option>
                                        <option selected>2024</option>
                                    </select>
                                </li>
                            </ul>
                        </dd>
                    </dl>
                    <dl id="dateBoxContainer">
                        <dt>
                            조회기간<span class="eq">*</span>
                        </dt>
                        <dd>
                            <ul class="date-box" >
                                <li id="startDateContainer">
                                    <input type="month" id="startDate" name="startDate" value="2024-01">
                                </li>
                                <li id="endDateContainer">
                                    <input type="month" id="endDate" name="endDate" value="2024-05">
                                </li>
                            </ul>
                        </dd>
                    </dl>

                    <dl>
                        <dt><label for="confirm">표출조건</label></dt>
                        <dd>
                            <select id="confirm" class="w120">
                                <option>5분</option>

                            </select>
                        </dd>
                    </dl>
                    <dl>
                        <dt><label for="btn-search"></label></dt>
                        <dd>
                            <ul>
                                <li>
                                    <a class="btn btn-delete" title="검색" id="btn-search" onclick="searchData()">
                                        <img src="/images/icon/btn-srch.svg" alt="검색 아이콘">
                                        검색
                                    </a>
                                </li>
                            </ul>
                        </dd>
                    </dl>
                </div>

            </div></section>
        <div class="row row-2" style="margin-bottom: 10px">
            <div class="col wp50" style="margin-right: 15px">
                <section class="tab-section section_top">
                    <div class="title-wrap" style="margin-bottom: 0px">
                        <h3>가스소비량</h3>
                        <ul class="tab-links-sub">
                            <li><a href="#tab1" title="통계">통계</a></li>
                            <li><a href="#tab2" title="현황">현황</a></li>
                        </ul>
                    </div>
                    <div class="tab-contents">
                        <!-- tab1 -->
                        <div class="tab-item-sub" id="tab1">
                            <div class="chart-wrap" style="border: none">
                                <div id="chartHolder1" style="width: 100%; height: 310px; padding-top: 13px"></div>
                            </div>
                        </div>
                        <!-- tab2 -->
                        <div class="tab-item-sub" id="tab2">
                            <div class="section-card-wrap" style="height: 88px">
                                <section class="card-section-top">
                                    <div class="title card-section-title">
                                        <h3 class="card-text-top">가스소비량(Nm3)</h3><h3 class="card-text-top">700</h3>
                                    </div>
                                    <dl>
                                        <dt>전일대비</dt>
                                        <dd>
                                            <span class="down"></span>
                                            <span class="fs18 fw600">1.20</span>
                                            <span class="unit">%</span>
                                        </dd>
                                    </dl>
                                </section>
                                <section class="card-section-top">
                                    <div class="title card-section-title">
                                        <h3>가스비용(원)</h3><h3 class="card-text-top">1,000,000</h3>
                                    </div>
                                    <dl>
                                        <dt>전일대비</dt>
                                        <dd>
                                            <span class="up"></span> 1.20 <span class="unit">%</span>
                                        </dd>
                                    </dl>
                                </section>
                            </div>
                            <div class="container-fluid">
                                <p id="selectedItem"></p>
                                <div id="theGrid" style="width: 100%; height: 230px"></div>
                            </div>
                        </div>

                    </div>
                </section>
            </div>

            <div class="col wp50">
                <section class="tab-section section_top">
                    <div class="title-wrap" style="margin-bottom: 0px">
                        <h3>전기생산량</h3>
                        <ul class="tab-links-sub">
                            <li><a href="#tab3" title="통계">통계</a></li>
                            <li><a href="#tab4" title="현황">현황</a></li>

                        </ul>
                    </div>
                    <div class="tab-contents">
                        <!-- tab5 -->
                        <div class="tab-item-sub" id="tab3">
                            <div class="chart-wrap" style="border: none">
                                <div id="chartHolder2" style="width: 100%; height: 310px; padding-top: 13px"></div>
                            </div>
                        </div>
                        <!-- tab6 -->
                        <div class="tab-item-sub" id="tab4">
                            <div class="section-card-wrap" style="height: 88px">
                                <section class="card-section-top">
                                    <div class="title card-section-title">
                                        <h3 class="card-text-top">전기생산량(kWh)</h3><h3 class="card-text-top">2250</h3>
                                    </div>
                                    <dl>
                                        <dt>전일대비</dt>
                                        <dd>
                                            <span class="down"></span>
                                            <span class="fs18 fw600">1.20</span>
                                            <span class="unit">%</span>
                                        </dd>
                                    </dl>
                                </section>
                                <section class="card-section-top">
                                    <div class="title card-section-title">
                                        <h3>예상수익(원)</h3><h3 class="card-text-top">195,000</h3>
                                    </div>
                                    <dl>
                                        <dt>전일대비</dt>
                                        <dd>
                                            <span class="up"></span> 1.20 <span class="unit">%</span>
                                        </dd>
                                    </dl>
                                </section>
                            </div>
                            <div class="container-fluid">
                                <div id="theGrid2" style="width: 100%; height: 230px"></div>
                            </div>
                        </div>

                    </div>
                </section>
            </div>
        </div>


        <div class="row row-2" style="margin-bottom: 10px">
            <div class="col wp50" style="margin-right: 15px">
                <section class="tab-section section_top">
                    <div class="title-wrap" style="margin-bottom: 0px">
                        <h3>열공급량</h3>
                        <ul class="tab-links-sub">
                            <li><a href="#tab5" title="통계">통계</a></li>
                            <li><a href="#tab6" title="현황">현황</a></li>

                        </ul>
                    </div>
                    <div class="tab-contents">
                        <!-- tab1 -->
                        <div class="tab-item-sub" id="tab5">
                            <div class="chart-wrap" style="border: none">
                                <div id="chartHolder3" style="width: 100%; height: 310px; padding-top: 13px"></div>
                            </div>
                        </div>
                        <!-- tab2 -->
                        <div class="tab-item-sub" id="tab6">
                            <div class="section-card-wrap" style="height: 88px">
                                <section class="card-section-top">
                                    <div class="title card-section-title">
                                        <h3 class="card-text-top">열공급량(Mcal)</h3><h3 class="card-text-top">700</h3>
                                    </div>
                                    <dl>
                                        <dt>전일대비</dt>
                                        <dd>
                                            <span class="down"></span>
                                            <span class="fs18 fw600">1.20</span>
                                            <span class="unit">%</span>
                                        </dd>
                                    </dl>
                                </section>
                                <section class="card-section-top">
                                    <div class="title card-section-title">
                                        <h3>예상수익(원)</h3><h3 class="card-text-top">1,000,000</h3>
                                    </div>
                                    <dl>
                                        <dt>전일대비</dt>
                                        <dd>
                                            <span class="up"></span> 1.20 <span class="unit">%</span>
                                        </dd>
                                    </dl>
                                </section>
                            </div>
                            <div class="container-fluid">
                                <div id="theGrid3" style="width: 100%; height: 230px"></div>
                            </div>
                        </div>

                    </div>
                </section>
            </div>

            <div class="col wp50">
                <section class="tab-section section_top">
                    <div class="title-wrap" style="margin-bottom: 0px">
                        <h3>효율</h3>
                        <ul class="tab-links-sub">
                            <li><a href="#tab7" title="통계">통계</a></li>
                            <li><a href="#tab8" title="현황">현황</a></li>

                        </ul>
                    </div>
                    <div class="tab-contents">
                        <!-- tab7 -->
                        <div class="tab-item-sub" id="tab7">
                            <div class="chart-wrap" style="border: none">
                                <div id="chartHolder4" style="width: 100%; height: 310px; padding-top: 13px"></div>
                            </div>
                        </div>
                        <!-- tab8 -->
                        <div class="tab-item-sub" id="tab8">
                            <div class="section-card-wrap" style="height: 88px">
                                <section class="card-section-top">
                                    <div class="title card-section-title">
                                        <h3 class="card-text-top">총효율(%)</h3><h3 class="card-text-top">700</h3>
                                    </div>
                                    <dl>
                                        <dt>전일대비</dt>
                                        <dd>
                                            <span class="down"></span>
                                            <span class="fs18 fw600">1.20</span>
                                            <span class="unit">%</span>
                                        </dd>
                                    </dl>
                                </section>
                                <section class="card-section-top">
                                    <div class="title card-section-title">
                                        <h3>전기/효율(%)</h3><h3 class="card-text-top">35/0</h3>
                                    </div>
                                    <dl>
                                        <dt>전일대비</dt>
                                        <dd>
                                            <span class="up"></span> 1.20 <span class="unit">%</span>
                                        </dd>
                                    </dl>
                                </section>
                            </div>
                            <div class="container-fluid">
                                <div id="theGrid4" style="width: 100%; height: 230px"></div>
                            </div>
                        </div>

                    </div>
                </section>
            </div>
        </div>
    </div> <!--//layout-contents end -->
    <footer>
        <p>Copyrightⓒ 0000 corp. All rights reserved.</p>
    </footer>
    <div style="height: 10px"></div>
    <!-- [대시보드] 팝업  -->
    <div class="dashboard-layout-popup">
        <div class="popup-overlay"></div>
        <div class="popup-wrapper wp80" id="popup1">
            <div class="popup-title">
                <h3>카드 수정</h3>
                <a title="팝업닫기" class="btn-popup-close">
                    <img src="/images/icon/btn-popup-close.svg" alt="닫기">
                </a>
            </div>
            <div class="popup-contents">
                <div class="card-wrap card-edit-wrap">
                    <div class="gesture-box">
                        <img src="/images/icon/ico-gesture.png" alt="제스처 안내">
                    </div>
                    <section>
                        <div class="title">
                            <h3>INPUT</h3>
                            <a title="숨김" class="btn-hidden"></a>
                        </div>
                        <dl>
                            <dt>LNG사용량</dt>
                            <dd>
                                9,999 <span class="unit">Nm³</span>
                            </dd>
                        </dl>
                        <dl>
                            <dt>전일대비</dt>
                            <dd>
                                <span class="down"></span> 1.20 <span class="unit">%</span>
                            </dd>
                        </dl>
                    </section>
                    <section>
                        <div class="title">
                            <h3>Elec. OUTPUT</h3>
                            <a title="숨김" class="btn-hidden"></a>
                        </div>
                        <dl>
                            <dt>전기생산량</dt>
                            <dd>
                                9,999 <span class="unit">kWh</span>
                            </dd>
                        </dl>
                        <dl>
                            <dt>전일대비</dt>
                            <dd>
                                <span class="up"></span> 2.20 <span class="unit">%</span>
                            </dd>
                        </dl>
                    </section>
                    <section>
                        <div class="title">
                            <h3>Heat OUTPUT</h3>
                            <a title="숨김" class="btn-hidden"></a>
                        </div>
                        <dl>
                            <dt>열 생산량</dt>
                            <dd>
                                9,999 <span class="unit">Mcal</span>
                            </dd>
                        </dl>
                        <dl>
                            <dt>전일대비</dt>
                            <dd>
                                <span class="down"></span> 1.20 <span class="unit">%</span>
                            </dd>
                        </dl>
                    </section>
                    <section>
                        <div class="title">
                            <h3>F/C Efficiency</h3>
                            <a title="숨김" class="btn-hidden"></a>
                        </div>
                        <dl>
                            <dt>전기효율</dt>
                            <dd>
                                45.5 <span class="unit">%</span>
                            </dd>
                        </dl>
                        <dl>
                            <dt>열효율</dt>
                            <dd>
                                39.0 <span class="unit">%</span>
                            </dd>
                        </dl>
                    </section>
                    <section>
                        <div class="title">
                            <h3>INCOME</h3>
                            <a title="숨김" class="btn-hidden"></a>
                        </div>
                        <dl>
                            <dt>예상수익</dt>
                            <dd>
                                999,999 <span class="unit">원</span>
                            </dd>
                        </dl>
                        <dl>
                            <dt>전일대비</dt>
                            <dd>
                                <span class="up"></span> 1.20 <span class="unit">%</span>
                            </dd>
                        </dl>
                    </section>

                    <section>
                        <div class="title">
                            <h3>Heat OUTPUT</h3>
                            <a title="숨김" class="btn-hidden"></a>
                        </div>
                        <dl>
                            <dt>열 생산량</dt>
                            <dd>
                                9,999 <span class="unit">Mcal</span>
                            </dd>
                        </dl>
                        <dl>
                            <dt>전일대비</dt>
                            <dd>
                                <span class="down"></span> 1.20 <span class="unit">%</span>
                            </dd>
                        </dl>
                    </section>
                    <section>
                        <div class="title">
                            <h3>F/C Efficiency</h3>
                            <a title="숨김" class="btn-hidden"></a>
                        </div>
                        <dl>
                            <dt>전기효율</dt>
                            <dd>
                                45.5 <span class="unit">%</span>
                            </dd>
                        </dl>
                        <dl>
                            <dt>열효율</dt>
                            <dd>
                                39.0 <span class="unit">%</span>
                            </dd>
                        </dl>
                    </section>
                    <section class="card-hidden">
                        <div class="title">
                            <h3>INCOME</h3>
                            <a title="숨김" class="btn-hidden"></a>
                        </div>
                        <dl>
                            <dt>예상수익</dt>
                            <dd>
                                999,999 <span class="unit">원</span>
                            </dd>
                        </dl>
                        <dl>
                            <dt>전일대비</dt>
                            <dd>
                                <span class="up"></span> 1.20 <span class="unit">%</span>
                            </dd>
                        </dl>
                    </section>
                </div> <!--//swiper-wrapper end -->
            </div>
            <div class="popup-button">
                <button class="btn-popup-close">취소</button>
                <button class="btn-navy">저장</button>
            </div>
        </div>
    </div> <!-- //dashboard-layout-popup end -->
    </div> <!-- //page-wrapper end-->

    <script>

        // -----------------------차트 설정 시작-----------------------

        function RunRmateGraph(param){

            setTimeout(function(){
                let con = param;

                rMateChartH5.create(con, "chartHolder" + con.replace(/\D/g, ""), "100%", "100%");

                chartReadyHandler(con);
                console.log('check', param);
                document.getElementById(param).resize();
            }, 300)


        }

        function chartReadyHandler(id){
            let chartIndex = id.replace(/\D/g, "");
            let data;
            console.log('id')
            switch(chartIndex){
                case "1" : document.getElementById(id).setLayout(layoutStrValue("gas", "가스소비량", "temperature", "외기온도"));
                           document.getElementById(id).setData(chartData);
                    break;
                case "2" : document.getElementById(id).setLayout(layoutStrValue("electronic", "전기생산량", "temperature", "외기온도"));
                           document.getElementById(id).setData(chartData2);
                    break;
                case "3" : document.getElementById(id).setLayout(layoutStrValue("heat", "열 공급량", "temperature", "외기온도"));
                           document.getElementById(id).setData(chartData3);
                    break;
                case "4" : document.getElementById(id).setLayout(layoutStrValue("efficiency", "효율", "temperature", "외기온도"));
                           document.getElementById(id).setData(chartData4);
                    break;

            }

        }


        /*rMateChartH5.create("chart1", "chartHolder", "", "100%", "100%");

        rMateChartH5.create("chart2", "chartHolder2", "", "100%", "100%");

        rMateChartH5.create("chart3", "chartHolder3", "", "100%", "100%");

        rMateChartH5.create("chart4", "chartHolder4", "", "100%", "100%");
*/
        // 스트링 형식으로 레이아웃 정의.
        function layoutStrValue(yField, yFieldName, yField2, yFieldName2) {
            return `
        <rMateChart backgroundColor="#FFFFFF" borderStyle="none">
            <Options>
                <Caption text="" paddingBottom="20"/>
                <Legend defaultMouseOverAction="true" useVisibleCheck="true"/>
            </Options>
            <NumberFormatter id="numFmt1" useThousandsSeparator="true" />
            <CurrencyFormatter id="numFmt2" precision="0" currencySymbol="°C" alignSymbol="right"/>
            <Combination2DChart seriesMouseOverAction="series" showDataTips="true" dataTipJsFunction="dataTipJsFunc" paddingBottom="0">
                <horizontalAxis>
                    <CategoryAxis categoryField="Hour" padding="0.5"/> <!-- categoryName을 사용 -->
                </horizontalAxis>
                <verticalAxis>
                    <LinearAxis id="vAxis1" formatter="{numFmt1}"/>
                </verticalAxis>
                <series>
                    <Column2DSeries labelPosition="outside" yField="${yField}" displayName="${yFieldName}" showValueLabels="[30]" fill="#62b2fd">
                        <showDataEffect>
                            <SeriesInterpolate/>
                        </showDataEffect>
                    </Column2DSeries>
                    <Line2DSeries radius="6" yField="${yField2}" displayName="${yFieldName2}" itemRenderer="DiamondItemRenderer">
                        <lineStroke>
                            <Stroke color="#ffa336" weight="2"/>
                        </lineStroke>
                        <verticalAxis>
                            <LinearAxis id="vAxis2" formatter="{numFmt1}"/>
                        </verticalAxis>
                        <showDataEffect>
                            <SeriesInterpolate/>
                        </showDataEffect>
                    </Line2DSeries>
                </series>
                <verticalAxisRenderers>
                    <Axis2DRenderer axis="{vAxis1}" showLine="false"/>
                    <Axis2DRenderer axis="{vAxis2}" showLine="false"/>
                </verticalAxisRenderers>
            </Combination2DChart>
        </rMateChart>
    `;
        }

        // 차트 데이터
        var chartData =
            [   {"Hour":"1시","gas":200,"temperature":20},
                {"Hour":"2시","gas":300,"temperature":20},
                {"Hour":"3시","gas":420,"temperature":18},
                {"Hour":"4시","gas":550,"temperature":19},
                {"Hour":"5시","gas":620,"temperature":20},
                {"Hour":"6시","gas":720,"temperature":18},
                {"Hour":"7시","gas":880,"temperature":19},
                {"Hour":"8시","gas":990,"temperature":19},
                {"Hour":"9시","gas":1000,"temperature":20},
                {"Hour":"10시","gas":1100,"temperature":21},
                {"Hour":"11시","gas":1220,"temperature":23},
                {"Hour":"12시","gas":1440,"temperature":24},
                {"Hour":"13시","gas":1500,"temperature":25},
                {"Hour":"14시","gas":1100,"temperature":27},
                {"Hour":"15시","gas":1300,"temperature":29},
                {"Hour":"16시","gas":1200,"temperature":32},
                {"Hour":"17시","gas":1400,"temperature":34},
                {"Hour":"18시","gas":1500,"temperature":32},
                {"Hour":"19시","gas":1500,"temperature":30},
                {"Hour":"20시","gas":990,"temperature":27},
                {"Hour":"21시","gas":1350,"temperature":26},
                {"Hour":"22시","gas":1200,"temperature":24},
                {"Hour":"23시","gas":1220,"temperature":23},
                {"Hour":"24시","gas":1440,"temperature":21}

            ];
        var chartData2 =
            [   {"Hour":"1시","electronic":100,"temperature":20},
                {"Hour":"2시","electronic":120,"temperature":20},
                {"Hour":"3시","electronic":80,"temperature":18},
                {"Hour":"4시","electronic":90,"temperature":19},
                {"Hour":"5시","electronic":80,"temperature":20},
                {"Hour":"6시","electronic":70,"temperature":18},
                {"Hour":"7시","electronic":85,"temperature":19},
                {"Hour":"8시","electronic":88,"temperature":19},
                {"Hour":"9시","electronic":110,"temperature":20},
                {"Hour":"10시","electronic":120,"temperature":21},
                {"Hour":"11시","electronic":120,"temperature":23},
                {"Hour":"12시","electronic":110,"temperature":24},
                {"Hour":"13시","electronic":70,"temperature":25},
                {"Hour":"14시","electronic":60,"temperature":27},
                {"Hour":"15시","electronic":80,"temperature":29},
                {"Hour":"16시","electronic":70,"temperature":32},
                {"Hour":"17시","electronic":80,"temperature":34},
                {"Hour":"18시","electronic":90,"temperature":32},
                {"Hour":"19시","electronic":100,"temperature":30},
                {"Hour":"20시","electronic":80,"temperature":27},
                {"Hour":"21시","electronic":90,"temperature":26},
                {"Hour":"22시","electronic":60,"temperature":24},
                {"Hour":"23시","electronic":60,"temperature":23},
                {"Hour":"24시","electronic":70,"temperature":21}

            ];

        var chartData3 =
            [   {"Hour":"1시","heat":100,"temperature":20},
                {"Hour":"2시","heat":90,"temperature":20},
                {"Hour":"3시","heat":50,"temperature":18},
                {"Hour":"4시","heat":40,"temperature":19},
                {"Hour":"5시","heat":80,"temperature":20},
                {"Hour":"6시","heat":70,"temperature":18},
                {"Hour":"7시","heat":90,"temperature":19},
                {"Hour":"8시","heat":70,"temperature":19},
                {"Hour":"9시","heat":80,"temperature":20},
                {"Hour":"10시","heat":90,"temperature":21},
                {"Hour":"11시","heat":70,"temperature":23},
                {"Hour":"12시","heat":50,"temperature":24},
                {"Hour":"13시","heat":90,"temperature":25},
                {"Hour":"14시","heat":90,"temperature":27},
                {"Hour":"15시","heat":90,"temperature":29},
                {"Hour":"16시","heat":80,"temperature":32},
                {"Hour":"17시","heat":80,"temperature":34},
                {"Hour":"18시","heat":90,"temperature":32},
                {"Hour":"19시","heat":100,"temperature":30},
                {"Hour":"20시","heat":80,"temperature":27},
                {"Hour":"21시","heat":90,"temperature":26},
                {"Hour":"22시","heat":60,"temperature":24},
                {"Hour":"23시","heat":60,"temperature":23},
                {"Hour":"24시","heat":70,"temperature":21}

            ];

        var chartData4 =
            [   {"Hour":"1시","efficiency":70,"temperature":20},
                {"Hour":"2시","efficiency":90,"temperature":20},
                {"Hour":"3시","efficiency":80,"temperature":18},
                {"Hour":"4시","efficiency":60,"temperature":19},
                {"Hour":"5시","efficiency":80,"temperature":20},
                {"Hour":"6시","efficiency":70,"temperature":18},
                {"Hour":"7시","efficiency":90,"temperature":19},
                {"Hour":"8시","efficiency":70,"temperature":19},
                {"Hour":"9시","efficiency":80,"temperature":20},
                {"Hour":"10시","efficiency":90,"temperature":21},
                {"Hour":"11시","efficiency":70,"temperature":23},
                {"Hour":"12시","efficiency":80,"temperature":24},
                {"Hour":"13시","efficiency":90,"temperature":25},
                {"Hour":"14시","efficiency":90,"temperature":27},
                {"Hour":"15시","efficiency":90,"temperature":29},
                {"Hour":"16시","efficiency":80,"temperature":32},
                {"Hour":"17시","efficiency":80,"temperature":34},
                {"Hour":"18시","efficiency":90,"temperature":32},
                {"Hour":"19시","efficiency":80,"temperature":30},
                {"Hour":"20시","efficiency":80,"temperature":27},
                {"Hour":"21시","efficiency":90,"temperature":26},
                {"Hour":"22시","efficiency":60,"temperature":24},
                {"Hour":"23시","efficiency":60,"temperature":23},
                {"Hour":"24시","efficiency":70,"temperature":21}

            ];

        let readType = '';



        /*rMateChartH5.calls("chart1", {
            "setLayout" : layoutStrValue("gas", "가스소비량", "temperature", "외기온도"),
            "setData" : chartData
        });

        rMateChartH5.calls("chart2", {
            "setLayout" : layoutStrValue("electronic", "전기생산량", "temperature", "외기온도"),
            "setData" : chartData2
        });

        rMateChartH5.calls("chart3", {
            "setLayout" : layoutStrValue("heat", "열 공급량", "temperature", "외기온도"),
            "setData" : chartData3
        });

        rMateChartH5.calls("chart4", {
            "setLayout" : layoutStrValue("efficiency", "효율", "temperature", "외기온도"),
            "setData" : chartData4
        });
*/
        function dataTipJsFunc (seriesId, seriesName, index, xName, yName, data, values) {
            if (seriesName == "외기온도")
                return data['Hour'] + " 외기온도 : " + "<b>" + data['temperature'] + "°C</b>";
            else if(seriesName == "가스소비량")
                return data['Hour'] + " 가스소비량 : " + "<b>" + data['gas'] + "Nm³</b>";
            else if(seriesName == "전기생산량")
                return data['Hour'] + " 전기생산량 : " + "<b>" + data['electronic'] + "kWh</b>";
            else if(seriesName == "열 공급량")
                return data['Hour'] + " 열공급량 : " + "<b>" + data['heat'] + "Mcal</b>";
            else if(seriesName == "효율")
                return data['Hour'] + " 효율 : " + "<b>" + data['efficiency'] + "%</b>";
        }


        function reload(param){

            setTimeout(function(){
                document.getElementById(param).resize();
            }, 60);
        }

        /*rMateChartH5.registerTheme(rMateChartH5.themes);


        function rMateChartH5ChangeTheme(theme){
            document.getElementById("chart1").setTheme(theme);
            document.getElementById("chart2").setTheme(theme);
            document.getElementById("chart3").setTheme(theme);
            document.getElementById("chart4").setTheme(theme);

        }
*/

        //===============================================================================================================

        let theGrid;
        let theGrid2;
        let theGrid3;
        let theGrid4;

        let viewdata;
        let viewdata2;
        let viewdata3;
        let viewdata4;



        let columns = [
            { binding: 'hour', header: '시간', align: 'center', width: '*' },
            { binding: 'gas', header: '가스소비량(Nm³)', align: 'center', width: '*' },
            { binding: 'won', header: '가스사용비용(원)', align: 'center', width: '*' },
            { binding: 'temperature', header: '외기온도(°C)', align: 'center', width: '*' },
        ];

        let columns2 = [
            { binding: 'hour', header: '시간', align: 'center', width: '*' },
            { binding: 'electronic', header: '전기생산량(kWh)', align: 'center', width: '*' },
            { binding: 'smp', header: 'SMP', align: 'center', width: '*' },
            { binding: 'income', header: '생산예상수익(원)', align: 'center', width: '*' },
            { binding: 'temperature', header: '외기온도(°C)', align: 'center', width: '*' },
        ];
        let columns3 = [
            { binding: 'hour', header: '시간', align: 'center', width: '*' },
            { binding: 'heat', header: '열 공급량(Mcal)', align: 'center', width: '*' },
            { binding: 'unitPrice', header: '열에너지단가', align: 'center', width: '*' },
            { binding: 'earnings', header: '예상수익(원)', align: 'center', width: '*' },
            { binding: 'temperature', header: '외기온도(°C)', align: 'center', width: '*' },
        ];
        let columns4 = [
            { binding: 'hour', header: '시간', align: 'center', width: '*' },
            { binding: 'efficiency', header: '효율(%)', align: 'center', width: '*' },
            { binding: 'electronic_efficiency', header: '전기/효율(%)', align: 'center', width: '*' },
            { binding: 'temperature', header: '외기온도(°C)', align: 'center', width: '*' },
        ];

        let dummyData = [
            { hour: 12, gas: 1440, won: "2,000", temperature: "24" },
            { hour: 13, gas: 1500, won: "3,000", temperature: "25" },
            { hour: 14, gas: 1100, won: "1,000", temperature: "27" },
            { hour: 15, gas: 1300, won: "1,500", temperature: "29" },
            { hour: 16, gas: 1200, won: "1,250", temperature: "32" }
        ]

        function init() {
            let data2 = [];
            let searchusr = $('#searchusr').val();

            $.ajax({
                url: '/api/inspec_report/read',
                type: 'GET',
                data: {
                    'searchusr' : 'infinited',
                    'spworkcd' : '',
                    'spcompcd' : '',
                    'spplancd' : ''
                },
                async: false,
                success: function(data){
                    console.log('check1',data.data);


                        data2 = data.data;



                }
            })

            viewdata = new wijmo.collections.CollectionView(data2);

            // 데이터 그리드에 바인딩
            theGrid = new wijmo.grid.FlexGrid('#theGrid', {
                autoGenerateColumns: false,
                showMarquee: true,
                columns: columns,
                itemsSource: viewdata
            });
            theGrid.rowHeaders.columns.splice(0,1);  //맨 앞에 헤더부분 없애기

            let data3 = [];
            $.ajax({
                url: '/api/inspec_report/read',
                type: 'GET',
                data: {
                    'searchusr' : 'infinited',
                    'spworkcd' : '',
                    'spcompcd' : '',
                    'spplancd' : ''
                },
                async: false,
                success: function(data){
                    console.log('check1',data.data);
                    data3 = data.data;
                }
            })
            viewdata2 = new wijmo.collections.CollectionView(data3);
            theGrid2 = new wijmo.grid.FlexGrid('#theGrid2', {
                autoGenerateColumns: false,
                showMarquee: true,
                columns: columns2,
                itemsSource: viewdata2
            });
            theGrid2.rowHeaders.columns.splice(0,1);

            let data4 = [];
            $.ajax({
                url: '/api/inspec_report/read',
                type: 'GET',
                data: {
                    'searchusr' : 'infinited',
                    'spworkcd' : '',
                    'spcompcd' : '',
                    'spplancd' : ''
                },
                async: false,
                success: function(data){
                    console.log('check1',data.data);
                    data4 = data.data;
                }
            })

            viewdata3 = new wijmo.collections.CollectionView(data4);
            theGrid3 = new wijmo.grid.FlexGrid('#theGrid3', {
                autoGenerateColumns: false,
                showMarquee: true,
                columns: columns3,
                itemsSource: viewdata3
            });
            theGrid3.rowHeaders.columns.splice(0,1);


            let data5 = [];
            $.ajax({
                url: '/api/inspec_report/read',
                type: 'GET',
                data: {
                    'searchusr' : 'infinited',
                    'spworkcd' : '',
                    'spcompcd' : '',
                    'spplancd' : ''
                },
                async: false,
                success: function(data){
                    console.log('check1',data.data);
                    data5 = data.data;
                }
            })

            viewdata4 = new wijmo.collections.CollectionView(data5);
            theGrid4 = new wijmo.grid.FlexGrid('#theGrid4', {
                autoGenerateColumns: false,
                showMarquee: true,
                columns: columns4,
                itemsSource: viewdata4
            });
            theGrid4.rowHeaders.columns.splice(0,1);
            /*theGrid2 = new wijmo.grid.FlexGrid('#theGrid2', {
                autoGenerateColumns: false,
                showMarquee: true,
                columns: columns2,
                itemsSource: viewdata
            });
            theGrid2.rowHeaders.columns.splice(0,1);

            theGrid3 = new wijmo.grid.FlexGrid('#theGrid3', {
                autoGenerateColumns: false,
                showMarquee: true,
                columns: columns3,
                itemsSource: viewdata
            });
            theGrid3.rowHeaders.columns.splice(0,1);

            theGrid4 = new wijmo.grid.FlexGrid('#theGrid4', {
                autoGenerateColumns: false,
                showMarquee: true,
                columns: columns4,
                itemsSource: viewdata
            });
            theGrid4.rowHeaders.columns.splice(0,1);*/

        }
        /*document.getElementById('spworkcd').addEventListener('change', searchData);
        document.getElementById('spcompcd').addEventListener('change', searchData);
        document.getElementById('spplancd').addEventListener('change', searchData);*/


        //==================================================================================================


        // 조회기간 변동 함수 -> 입력 필드를 동적으로 업데이트
        function updatePeriodInputs() {
            const periodType = document.getElementById("periodType").value;
            const selectedYear = document.getElementById("yearSelectTab").value; // 선택된 조회연도 가져오기
            const dateBoxContainer = document.getElementById("dateBoxContainer");
            const startDateContainer = document.getElementById("startDateContainer");
            const endDateContainer = document.getElementById("endDateContainer");
            const periodLabel = document.getElementById("dateBoxContainer") // <dl> 요소를 가져옴
            const searchYear = document.getElementById("searchYear")
            // 기존 내용을 초기화
            // document.getElementById("startDateContainer").innerHTML = "";
            // document.getElementById("endDateContainer").innerHTML = "";

            if (periodType === "yearly") { // 연도별 조회가 선택된 경우
                // 조회기간 글자 숨기기
                periodLabel.style.display = "none";
                // startDate와 endDate input 요소 숨기기
                startDateContainer.style.display = "none";
                endDateContainer.style.display = "none";
                searchYear.style.display = "block";
            } else {
                // 조회기간 글자 보이기
                periodLabel.style.display = "block";
                // startDate와 endDate input 요소 보이기
                startDateContainer.style.display = "inline-block";
                endDateContainer.style.display = "inline-block";

                // 각 기간유형에 맞는 요소 설정
                if (periodType === "hourly") {


                    const currentDate = new Date();
                    const defaultMonth = (currentDate.getMonth() + 1).toString().padStart(2, '0');
                    const defaultDay = currentDate.getDate().toString().padStart(2, '0');

                    document.getElementById("startDateContainer").innerHTML = `
                <input type="date" style="background-color: white" id="startDate" name="startDate" value="${selectedYear}-${defaultMonth}-${defaultDay}">
            `;

                    document.getElementById("endDateContainer").innerHTML = `
                <select id="startHour" name="startHour" style="width: 60px;">
                    ${generateHourOptions()}
                </select>
                -
                <select id="endHour" name="endHour" style="width: 60px;">
                    ${generateHourOptions(true)}
                </select>
            `;
                } else if (periodType === "monthly") {


                    const startDate = `${selectedYear}-01`;
                    const endDate = `${selectedYear}-12`;

                    document.getElementById("startDateContainer").innerHTML = `<input type="month" style="background-color: white" id="startDate" name="startDate" value="${startDate}">`;
                    document.getElementById("endDateContainer").innerHTML = `<input type="month" id="endDate" name="endDate" value="${endDate}">`;
                } else if (periodType === "quarterly") {

                    const options = `
                <option value="Q1">1분기</option>
                <option value="Q2">2분기</option>
                <option value="Q3">3분기</option>
                <option value="Q4">4분기</option>
            `;
                    document.getElementById("startDateContainer").innerHTML = `<select id="startQuarter">${options}</select>`;
                    document.getElementById("endDateContainer").innerHTML = `<select id="endQuarter">${options}</select>`;
                } else if (periodType === "halfyearly") {

                    const options = `
                <option value="H1">상반기</option>
                <option value="H2">하반기</option>
            `;
                    document.getElementById("startDateContainer").innerHTML = `<select id="startHalf">${options}</select>`;
                    document.getElementById("endDateContainer").innerHTML = `<select id="endHalf">${options}</select>`;
                }
            }
        }

        // 시간 옵션 생성 함수
        function generateHourOptions(isEnd = false) {
            return Array.from({length: 24}, (_, i) => {
                const hour = (i + 1).toString().padStart(2, '0');
                return `<option value="${hour}"${isEnd && hour === '24' || !isEnd && hour === '01' ? ' selected' : ''}>${hour}</option>`;
            }).join('');
        }


        $(document).ready(function () {

            initializeSelections();
            init();

            for(let i=0; i<4; i++){
                RunRmateGraph(`chart${i+1}`);
            }

        });


    </script>
    <!--</body>-->
</th:block>
</html>
